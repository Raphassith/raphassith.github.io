<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login with Telegram</title>
</head>

<body>
    <h2>‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢ Telegram</h2>
    <div id="user-info">
        <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
    </div>

    <script>
        const botId = "7891169932:AAG-yosyQLuvPRf1tszLohOjzYR0fCr1FDA"; // üîπ ‡πÉ‡∏™‡πà Telegram Bot ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì

        function redirectToTelegram() {
            window.location.href = `https://oauth.telegram.org/auth?bot_id=${botId}&origin=https://raphassith.github.io/telegram.html&embed=1`;
        }

        function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            let data = {};
            params.forEach((value, key) => {
                data[key] = value;
            });
            return data;
        }

        function saveUserData(userData) {
            localStorage.setItem("telegram_user", JSON.stringify(userData));
            window.location.href = "/"; // üîπ ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        }

        function displayUser(user) {
            document.getElementById("user-info").innerHTML = `
                <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h3>
                <p><strong>‡∏ä‡∏∑‡πà‡∏≠:</strong> ${user.first_name} ${user.last_name || ""}</p>
                <p><strong>Username:</strong> @${user.username}</p>
                <img src="${user.photo_url}" alt="Profile Picture" width="100">
            `;
        }

        function init() {
            let user = localStorage.getItem("telegram_user");

            if (user) {
                user = JSON.parse(user);
                displayUser(user);
            } else {
                const userData = getQueryParams();
                if (userData.id) {
                    saveUserData(userData);
                } else {
                    redirectToTelegram(); // üîπ ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô ‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Telegram OAuth
                }
            }
        }

        init(); // üîπ ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
    </script>
</body>

</html>